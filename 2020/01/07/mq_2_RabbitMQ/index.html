<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="一些关于技术的碎语"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><title>消息队列（二）RabbitMQ入门 | 微言术语</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">消息队列（二）RabbitMQ入门</h1><a id="logo" href="/.">微言术语</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">消息队列（二）RabbitMQ入门</h1><div class="post-meta"><a href="/2020/01/07/mq_2_RabbitMQ/#comments" class="comment-count"></a><p><span class="date">Jan 07, 2020</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>RabbitMQ 是一个热门的消息中间件，在分布式环境下性能高。</p>
<ul>
<li>消息，是指在应用间传送的数据，包括字符串、JSON、对象等</li>
<li>消息中间件（MQ），是指利用高效可靠的消息传递机制进行与平台无关的数据交流，并基于数据通信进行分布式系统的集成。</li>
<li>常用的消息中间件：RabbitMQ、Kafka、ActiveMQ、RocketMQ</li>
</ul>
<h1 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h1><h3 id="1-AMQP-协议"><a href="#1-AMQP-协议" class="headerlink" title="1. AMQP 协议"></a>1. AMQP 协议</h3><ul>
<li>AMQP，即Advanced Message Queuing Protocol，高级消息队列协议，是应用层协议的一个开放标准，为面向消息的中间件设计。消息中间件主要用于组件之间的解耦，消息的发送者无需知道消息使用者的存在，反之亦然。</li>
<li>AMQP的主要特征是面向消息、队列、路由（包括点对点和发布/订阅）、可靠性、安全。</li>
<li>RabbitMQ就是一个基于AMQP协议的中间件</li>
</ul>
<p><strong><em>工作流程</em></strong></p>
<p>发布者生产消息经由交换机，交换机根据路由规则分发给与该交换机绑定的队列， AMQP 代理会将消息投递给订阅了该队列的消费者或由消费者自助获取消息。</p>
<p><img src="/image/mq/mq-amqp.png" alt="AMQP"></p>
<p><strong><em>消息确认（Message Acknowledgements）机制</em></strong></p>
<p>当一个消息从队列中投递给消费者后，不会立即从队列中删除，直到它收到来自消费者的确认回执（Acknowledgement）后，才完全从队列中删除。</p>
<p><strong><em>处理无法路由的消息</em></strong></p>
<p>当一个消息无法被成功路由时（无法从交换机分发到队列），消息或许会被返回给发布者并被丢弃。或者，如果消息代理执行了延期操作，消息会被放入一个所谓的死信队列中。此时，消息发布者可以选择某些参数来处理这些特殊情况。</p>
<p><strong><em>注意</em></strong></p>
<ul>
<li>发布者、交换机、队列、消费者都可以有多个。同时因为 AMQP 是一个网络协议，所以这个过程中的发布者，消费者，消息代理 可以分别存在于不同的设备上。</li>
<li>发布者发布消息时可以给消息指定各种消息属性（Message Meta-data）。有些属性有可能会被消息代理（Brokers）使用，然而其他的属性则是完全不透明的，它们只能被接收消息的应用所使用。</li>
</ul>
<h3 id="2-Erlang-OTP"><a href="#2-Erlang-OTP" class="headerlink" title="2. Erlang/OTP"></a>2. Erlang/OTP</h3><p><strong><em>Erlang</em></strong><br>    +    Erlang是一种通用的<em>面向并发</em>的编程语言，它由瑞典电信设备制造商爱立信所辖的CS-Lab开发，目的是创造一种可以应对大规模并发活动的编程语言和运行环境。<br>    +    Erlang非常适合于构建分布式，实时软并行计算系统</p>
<p><strong><em>OTP设计原则</em></strong><br>OTP设计原则用于指导以进程、模块和目录的形式组织Erlang代码的规范。<br><img src="/image/mq/mq-2-otp.png" alt="OTP设计原则结构图"></p>
<ul>
<li><p>监控树：基于 workers（工人）和 supervisors（监工、监程）的进程组织模型</p>
<ul>
<li>workers：工作进程</li>
<li>supervisors：重置进程，当监控到 workers 发生异常，该进程会对它进行重启</li>
<li><img src="/image/mq/OTP-worker.png.png" alt="otp监控树"></li>
</ul>
</li>
<li><p>Behaviours（行为模式）：在监控树中，多个supervisors的结果是类似的，差别在于子进程不同。行为模式就是把通用行为抽象成一个模块，即把进程的代码分成通用的部分（behaviour 模块）和专有的部分（callback module 回调模块）.</p>
</li>
<li><p><code>RabbitMQ</code>符合OTP设计原则的行为</p>
<ul>
<li>gen_server 用于实现 C/S 结构中的服务端。</li>
<li>gen_fsm 用于实现有限状态机。</li>
<li>gen_event 用于实现事件处理功能。</li>
<li>supervisor 用于实现监督树中的督程。</li>
<li>gen_statem 新版本中的有限状态机实现 </li>
</ul>
</li>
</ul>
<blockquote>
<p>   Erlang语言只是一部分，实际上支撑这个生态/技术栈是EVM（ErlangVM/BEAM）/OTP（标准库）。<br>    RabbitMQ服务端代码是使用并发式语言Erlang编写的。</p>
</blockquote>
<h1 id="二、window-安装"><a href="#二、window-安装" class="headerlink" title="二、window 安装"></a>二、window 安装</h1><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h3><p><em>资源地址</em><br>在以下地址按电脑位数安装对应的版本：<br><a href="https://www.rabbitmq.com/download.html" target="_blank" rel="noopener">RabbitMQ 的下载地址</a><br><a href="https://www.erlang.org/downloads" target="_blank" rel="noopener">Erlang 的下载地址</a></p>
<p>1.因为RabbitMQ服务端是由 Erlang编写，所以 首先需要安装Erlang ，默认选项即可<br><img src="/image/mq/mq-2-erlInstall.png" alt="Erlang安装页面"></p>
<ol start="2">
<li><p>安装 RabbitMQ 中间件<br><img src="/image/mq/mq-2-rabbitmqctl.png" alt="RabbitMQ安装页面"></p>
</li>
<li><p>配置Erlang编写的环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 添加环境变量</span><br><span class="line">ERLANG_HOME C:\Program Files\erl10.6</span><br><span class="line">path ;%ERLANG_HOME%\bin;</span><br><span class="line"></span><br><span class="line"># cmd 测试</span><br><span class="line">C:\Users\wsz&gt;erl</span><br><span class="line">Eshell V10.6  (abort with ^G)</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装RabbitMQ-Plugins插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd C:\Program Files\RabbitMQ Server\rabbitmq_server-3.8.2\sbin</span><br><span class="line">c:</span><br><span class="line">rabbitmq-plugins enable rabbitmq_management</span><br><span class="line"></span><br><span class="line">rabbitmqctl status</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>以下表示安装成功<br><img src="/image/mq/mq-2-rabbitmqctl.png" alt="表示安装成功"></p>
<ol start="5">
<li>启动<code>/sbin/rabbitmq-server.bat</code>，访问 <code>http://localhost:15672/</code> 会显示下面的网站。默认用户名和密码都是 <em>guest</em></li>
</ol>
<p><img src="/image/mq/mq-2-rbmq.png" alt="启动成功"></p>
<blockquote>
<p>注：这个默认账户有限制，默认只能通过本地网络（如 localhost ）访问，远程网络访问受限，所以在实现生产和消费消息之前，需要另外添加个用户，并设置相应的访问权限。</p>
</blockquote>
<h3 id="2-基本概念"><a href="#2-基本概念" class="headerlink" title="2. 基本概念"></a>2. 基本概念</h3><ul>
<li><p>Broker：简单来说就是消息队列服务器实体</p>
</li>
<li><p><em>Exchange</em>：消息交换机，它指定消息按什么规则，路由到哪个队列</p>
<ul>
<li><p>交换机模式</p>
<ul>
<li><p>fanout 路由所有消息到所有与它绑定的Queue</p>
</li>
<li><p>direct 路由到那些binding key与routing key完全匹配的Queue中</p>
</li>
<li><p>topic 主题匹配订阅。模糊匹配</p>
<ul>
<li>* 可以代替一个单词。</li>
<li># 可以替代零个或多个单词。</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\*.aa.\*, 可以匹配 b.aa.b,不可以匹配 b.b.aa.b</span><br><span class="line"></span><br><span class="line">\#.aa.\*, 可以匹配 b.b.aa.b,不可以匹配 b.aa.b.b</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>headers 不依赖于routing,而是根据消息头来匹配</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Queue：消息队列载体，每个消息都会被投入到一个或多个队列</p>
</li>
<li><p><em>Binding</em>：绑定，它的作用就是把exchange和queue按照路由规则绑定起来</p>
</li>
<li><p><em>Routing Key</em>：路由关键字，exchange根据这个关键字进行消息投递</p>
</li>
<li><p>vhost ：<code>vhost</code>是<code>AMQP</code> 概念的基础，客户端在连接的时候必须制定一个 vhost RabbitMQ 默认创<br>建的 vhost 为“／”</p>
<ul>
<li>用户权限分离</li>
<li>逻辑隔离</li>
</ul>
</li>
<li><p>producer：消息生产者，就是投递消息的程序</p>
</li>
<li><p>consumer：消息消费者，就是接受消息的程序</p>
</li>
<li><p>connection：一个网络连接，例如TCP套接字</p>
<ul>
<li>channel：消息通道，在客户端的每个连接里，可建立多个channel，每个channel代表一个会话任务</li>
</ul>
</li>
</ul>
<h3 id="3-信息传递的过程"><a href="#3-信息传递的过程" class="headerlink" title="3. 信息传递的过程"></a>3. 信息传递的过程</h3><p><img src="/image/mq/mq-2-messgeTo.png" alt="信息传递的过程"><br><em>prefetchCount（权重）</em><br><img src="/image/mq/mq-2-prefetchCount.png" alt="prefetchCount"></p>
<h3 id="4-常用命令"><a href="#4-常用命令" class="headerlink" title="4. 常用命令"></a>4. 常用命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rabbitmq-plugins.bat list（查看已安装的插件列表）</span><br><span class="line">rabbitmq-plugins.bat enable rabbitmq_management（开启该插件）</span><br><span class="line"></span><br><span class="line"># 服务启动与关闭</span><br><span class="line">rabbitmq-service.bat start</span><br><span class="line">rabbitmq-service.bat stop</span><br></pre></td></tr></table></figure>


<h3 id="5-应用场景"><a href="#5-应用场景" class="headerlink" title="5. 应用场景"></a>5. 应用场景</h3><ul>
<li>异步处理-解耦</li>
<li>广播    订阅发布</li>
<li>流量削峰 缓存到消息队列</li>
<li><code>RabbitMQ的默认访问端口为5672，而管理端口为 15672</code></li>
</ul>
<h3 id="6-集群"><a href="#6-集群" class="headerlink" title="6. 集群"></a>6. 集群</h3><p>Rabbitmq 基于 Erlang语言编写，具有分布式特点，可以进行集群部署。在集群中，一台机器就是一个节点。<br>Rabbitmq存在一个虚拟主机的逻辑概念，用于划分服务。相对于一个节点来说，节点里可以根据服务的不同开启不同的虚拟主机。一个虚拟主机可以类比为关系数据库中的一个数据库。</p>
<hr>
<h1 id="三、Rabbitmq-CLI"><a href="#三、Rabbitmq-CLI" class="headerlink" title="三、Rabbitmq CLI"></a>三、Rabbitmq CLI</h1><p>Rabbitmq提供 rabbitmqctl通过命令行进行操作。rabbitmqctl 工具是一个系列的工具，运用这个工具可以执行大部分的 RabbitMQ 的管理操作。</p>
<h3 id="1-rabbitmqctl"><a href="#1-rabbitmqctl" class="headerlink" title="1. rabbitmqctl"></a>1. rabbitmqctl</h3><p>rabbitmqctl是用于管理RabbitMQ服务器节点的命令行工具。它通过连接到专用CLI工具通信端口上的目标RabbitMQ节点并使用共享密钥（称为cookie文件）进行身份验证来执行所有操作。</p>
<h3 id="2-查询操作"><a href="#2-查询操作" class="headerlink" title="2. 查询操作"></a>2. 查询操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl list_bindings    #查看绑定信息</span><br><span class="line">rabbitmqctl list_exchanges   #查看交换器</span><br><span class="line">rabbitmqctl list_queues   #查看队列</span><br><span class="line">rabbitmqctl list_channels	#查看通道</span><br><span class="line">rabbitmqctl list_consumers	#查看消费者</span><br></pre></td></tr></table></figure>

<h3 id="2-虚拟主机配置"><a href="#2-虚拟主机配置" class="headerlink" title="2. 虚拟主机配置"></a>2. 虚拟主机配置</h3><p><strong><em>语法</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">创建新的虚拟主机 </span><br><span class="line">rabbitmqctl add_vhost【主机name】</span><br><span class="line"></span><br><span class="line">删除虚拟主机</span><br><span class="line">rabbitmqctl delete_vhost【主机name】</span><br><span class="line"></span><br><span class="line">列出所有的虚拟主机</span><br><span class="line">rabbitmqctl list_vhosts </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 查看trace功能是否开启</span><br><span class="line">rabbitmqctl list_vhosts name tracing</span><br></pre></td></tr></table></figure>

<p><strong><em>实例</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 创建</span><br><span class="line">rabbitmqctl add_vhost test</span><br><span class="line"></span><br><span class="line">-- 列出</span><br><span class="line">rabbitmqctl list_vhosts </span><br><span class="line"></span><br><span class="line">	name</span><br><span class="line">	/ --默认虚拟主机</span><br><span class="line">	test</span><br></pre></td></tr></table></figure>

<h3 id="3-用户配置"><a href="#3-用户配置" class="headerlink" title="3. 用户配置"></a>3. 用户配置</h3><p><strong><em>用户类别</em></strong></p>
<table>
<thead>
<tr>
<th align="left">角色</th>
<th align="left">登陆控制台</th>
<th align="left">查看节点</th>
<th align="left">操作策略</th>
<th align="left">操作用户</th>
</tr>
</thead>
<tbody><tr>
<td align="left">超级管理员(administrator)</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="left">Y</td>
</tr>
<tr>
<td align="left">监控者(monitoring)</td>
<td align="left">Y</td>
<td align="left">Y</td>
<td align="left">N</td>
<td align="left">N</td>
</tr>
<tr>
<td align="left">策略制定者(policymaker)</td>
<td align="left">Y</td>
<td align="left">N</td>
<td align="left">Y</td>
<td align="left">N</td>
</tr>
<tr>
<td align="left">普通管理者(management)</td>
<td align="left">Y</td>
<td align="left">N</td>
<td align="left">N</td>
<td align="left">N</td>
</tr>
<tr>
<td align="left">生产者和消费者</td>
<td align="left">N</td>
<td align="left">N</td>
<td align="left">N</td>
<td align="left">N</td>
</tr>
</tbody></table>
<p><strong><em>语法</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">-- 创建用户</span><br><span class="line">rabbitmqctl add_user 【name】【password】</span><br><span class="line"></span><br><span class="line">-- 列出所有用户</span><br><span class="line">rabbitmqctl list_users</span><br><span class="line"></span><br><span class="line">-- 更改用户密码</span><br><span class="line">rabbitmqctl change_password 【name】【password】</span><br><span class="line"></span><br><span class="line">-- 清除用户密码</span><br><span class="line">rabbitmqctl clear_password 【name】</span><br><span class="line"></span><br><span class="line">-- 删除用户</span><br><span class="line">rabbitmqctl delete_user 【name】 删除user1用户</span><br><span class="line"></span><br><span class="line">-- 赋予用户某个角色</span><br><span class="line">rabbitmqctl set_user_tags 【name】【角色 administrator/monitoring/policymaker/management】 </span><br><span class="line"></span><br><span class="line">-- 设置权限（配置权限、发布者权限、消费者权限，正则表达式）</span><br><span class="line">rabbitmqctl set_permissions [-p &lt;vhost&gt;]【用户名】【conf】【write】【 read】 </span><br><span class="line">	conf 队列和交换机的创建和删除</span><br><span class="line">	write 发布消息</span><br><span class="line">	read 有关消息的任何操作，包括清除这个队列 </span><br><span class="line"></span><br><span class="line">正则实例：</span><br><span class="line">	&quot;.&quot;：匹配任何队列和交换器</span><br><span class="line">	&quot;checks-.&quot;/&quot;^checks-.&quot;：只匹配checks-开头的队列和交换器</span><br><span class="line">	&quot;&quot;：不匹配队列和交换器</span><br><span class="line">	 </span><br><span class="line"></span><br><span class="line">➜  ~ rabbitmqctl add_user root root</span><br><span class="line"></span><br><span class="line">-- 列出某用户的权限</span><br><span class="line">rabbitmqctl list_user_permissions 【用户名】 </span><br><span class="line"></span><br><span class="line">-- 列出指定虚拟主机下所有用户的权限</span><br><span class="line">rabbitmqctl list_permissions -p 【主机名】</span><br><span class="line"></span><br><span class="line">-- 清除某用户在指定虚拟机上的授权</span><br><span class="line">rabbitmqctl clear_permissions -p 【主机名】 【用户名】</span><br></pre></td></tr></table></figure>

<p><strong><em>实例</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 创建用户</span><br><span class="line">rabbitmqctl add_user admin admin</span><br><span class="line"></span><br><span class="line">-- 赋予超级管理员权限</span><br><span class="line">rabbitmqctl set_user_tags admin administrator</span><br><span class="line"></span><br><span class="line">-- 列出用户-权限</span><br><span class="line">rabbitmqctl list_users</span><br><span class="line"></span><br><span class="line">-- 配置权限</span><br><span class="line">rabbitmqctl set_permissions -p test admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br></pre></td></tr></table></figure>

<h3 id="4-节点配置"><a href="#4-节点配置" class="headerlink" title="4. 节点配置"></a>4. 节点配置</h3><p>rabbitmqctl 工具的标准语法如下 :<br><code>rabbitmqctl [ -n node] [-t timeout] [-q) {command) [command options ... ]</code></p>
<ul>
<li>-n 格式是rabbit@servername，默认节点是“rabbit hostname“，此处的 hostname是主机名称。</li>
<li>-t 超时时间（秒）</li>
<li>-q 宁静(quiet)模式 </li>
</ul>
<p><strong><em>实例</em></strong><br>查看主机为sky，等待10s：<br><code>rabbitmqctl -n rabbit@sky -t 10 list_users</code></p>
<h3 id="5-RabbitMQ-management-插件"><a href="#5-RabbitMQ-management-插件" class="headerlink" title="5. RabbitMQ management 插件"></a>5. RabbitMQ management 插件</h3><p>RabbitMQ management 插件同样是由 Erlang 语言编写的，并且和 RabbitMQ 服务运行在同一个Erlang 虚拟机中。<br>RabbitMQ management 插件可以提供 Web 管理界面用来管理如前面所述的虚拟主机、用户等，也可以用来管理队列、交换器、绑定关系、策略、 参数等，还可以用来监控 RabbitMQ服务的状态及一些数据统计类信息，可谓是功能强大，基本上能够涵盖所有 RabbitMQ 管理的<br>功能。</p>
<p>在最新版本中，该插件默认开启，可以通过<a href="http://localhost:15672/#/" target="_blank" rel="noopener">ip地址</a>访问</p>
<p><img src="/image/mq/rabbitmq-management.png" alt="rabbitmq-management"></p>
<hr>
<h1 id="四、在Java中的使用"><a href="#四、在Java中的使用" class="headerlink" title="四、在Java中的使用"></a>四、在Java中的使用</h1><h3 id="1-jar包配置"><a href="#1-jar包配置" class="headerlink" title="1. jar包配置"></a>1. jar包配置</h3><p><strong>通过包导入配置</strong></p>
<p><a href="http://repo1.maven.org/maven2/com/rabbitmq/amqp-client/" target="_blank" rel="noopener">RabbitMQ Jar包下载地址</a></p>
<p><strong>maven配置</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https://mvnrepository.com/artifact/com.rabbitmq/amqp-client --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.8.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="五、参考文章"><a href="#五、参考文章" class="headerlink" title="五、参考文章"></a>五、参考文章</h1><blockquote>
<p><a href="https://www.jianshu.com/p/9dc38b4a9e94" target="_blank" rel="noopener">Erlang/OTP设计原则</a><br><a href="https://www.cnblogs.com/gne-hwz/p/10714013.html" target="_blank" rel="noopener">rabbitMQ和对应的erlang版本匹配</a><br><a href="https://www.cnblogs.com/saryli/p/9729591.html" target="_blank" rel="noopener">windows10环境下的RabbitMQ安装步骤（图文）</a><br><a href="https://www.cnblogs.com/lfalex0831/p/8951955.html" target="_blank" rel="noopener">RabbitMQ windows安装（一 ）</a><br><a href="https://blog.csdn.net/qq_28513801/article/details/90641238" target="_blank" rel="noopener">rabbitmq基本原理以及常用命令rabbitmqctl</a><br><a href="https://blog.csdn.net/jxdl6655/article/details/78194191" target="_blank" rel="noopener">rabbitmq集群部署及配置</a><br><a href="https://www.cnblogs.com/douyi/p/11756118.html" target="_blank" rel="noopener">Rabbitmq-常用命令</a></p>
</blockquote>
</div><div class="post-copyright"><blockquote><p>原文作者: 古城烟雨</p><p>原文链接: <a href="http://zws6672.top/2020/01/07/mq_2_RabbitMQ/">http://zws6672.top/2020/01/07/mq_2_RabbitMQ/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"><a href="/tags/微服务/">微服务</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2020/01/17/wechat_1/" class="pre">小程序速读（一）入门</a><a href="/2020/01/05/mq_1/" class="next">消息队列（一）</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一、概述"><span class="toc-text">一、概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-AMQP-协议"><span class="toc-text">1. AMQP 协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Erlang-OTP"><span class="toc-text">2. Erlang/OTP</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#二、window-安装"><span class="toc-text">二、window 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-安装"><span class="toc-text">1. 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-基本概念"><span class="toc-text">2. 基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-信息传递的过程"><span class="toc-text">3. 信息传递的过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-常用命令"><span class="toc-text">4. 常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-应用场景"><span class="toc-text">5. 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-集群"><span class="toc-text">6. 集群</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、Rabbitmq-CLI"><span class="toc-text">三、Rabbitmq CLI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-rabbitmqctl"><span class="toc-text">1. rabbitmqctl</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-查询操作"><span class="toc-text">2. 查询操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-虚拟主机配置"><span class="toc-text">2. 虚拟主机配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-用户配置"><span class="toc-text">3. 用户配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-节点配置"><span class="toc-text">4. 节点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-RabbitMQ-management-插件"><span class="toc-text">5. RabbitMQ management 插件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四、在Java中的使用"><span class="toc-text">四、在Java中的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-jar包配置"><span class="toc-text">1. jar包配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五、参考文章"><span class="toc-text">五、参考文章</span></a></li></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/11/05/mservice-transaction/">微服务中事务的安全性</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/04/java-concurrent/">Java多线程（一）ThreadLocal</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/03/ms-tt/">面试记录（六）某拓</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/02/ms-yc/">面试记录（五）某车</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/02/leetcode-201019-201030/">leetcode-201019-201030</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/02/nk-201019-201030/">nk-201019-201030</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/18/redis-lua-1/">Redis Lua脚本入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/18/nk-201015-201018/">牛客网-201015-201018</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/18/leetcode-201012-201018/">leetcode-201012-201018</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/17/linux-fileSystem/">Linux 文件系统</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/ms/" style="font-size: 15px;">ms</a> <a href="/tags/devops/" style="font-size: 15px;">devops</a> <a href="/tags/CI/" style="font-size: 15px;">CI</a> <a href="/tags/tool/" style="font-size: 15px;">tool</a> <a href="/tags/neo4j/" style="font-size: 15px;">neo4j</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/oracle/" style="font-size: 15px;">oracle</a> <a href="/tags/微信小程序/" style="font-size: 15px;">微信小程序</a> <a href="/tags/系统/" style="font-size: 15px;">系统</a> <a href="/tags/博客搭建/" style="font-size: 15px;">博客搭建</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/运维/" style="font-size: 15px;">运维</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/分布式/" style="font-size: 15px;">分布式</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/并发/" style="font-size: 15px;">并发</a> <a href="/tags/javaweb/" style="font-size: 15px;">javaweb</a> <a href="/tags/微服务/" style="font-size: 15px;">微服务</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/elasticsearch/" style="font-size: 15px;">elasticsearch</a> <a href="/tags/源码/" style="font-size: 15px;">源码</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/nk/" style="font-size: 15px;">nk</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://juejin.im/" title="掘金" target="_blank">掘金</a><ul></ul><a href="https://www.cnblogs.com/" title="博客园" target="_blank">博客园</a><ul></ul><a href="https://www.infoq.cn/" title="info" target="_blank">info</a><ul></ul><a href="https://www.ibm.com/" title="ibm" target="_blank">ibm</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">古城烟雨.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>