<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="一些关于技术的碎语"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><title>MySQL SQL 练习题合集 | 微言术语</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">MySQL SQL 练习题合集</h1><a id="logo" href="/.">微言术语</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">MySQL SQL 练习题合集</h1><div class="post-meta"><a href="/2020/09/18/mysql-test/#comments" class="comment-count"></a><p><span class="date">Sep 18, 2020</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h3 id="一、几道SQL查询题"><a href="#一、几道SQL查询题" class="headerlink" title="一、几道SQL查询题"></a>一、几道SQL查询题</h3><ol>
<li><p>表结构定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">学生表</span><br><span class="line">1.1 student(Sid,Sname,Sage,Ssex)</span><br><span class="line">1.2 Sid 学生编号,Sname 学生姓名,Sage 出生年月,Ssex 学生性别</span><br><span class="line"></span><br><span class="line">课程表</span><br><span class="line">2.1 course(Cid,Cname,Tid)</span><br><span class="line">2.2 Cid 课程编号,Cname 课程名称,Tid 教师编号</span><br><span class="line"></span><br><span class="line">教师表</span><br><span class="line">3.1 teacher(Tid,Tname)</span><br><span class="line">3.2 Tid 教师编号,Tname 教师姓名</span><br><span class="line"></span><br><span class="line">成绩表</span><br><span class="line">4.1 sc(Sid,Cid,score)</span><br><span class="line">4.2 Sid 学生编号,Cid 课程编号,score 分数</span><br></pre></td></tr></table></figure>
</li>
<li><p>SQL语句定义</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">create table student(Sid varchar(10),Sname varchar(10),Sage datetime,Ssex varchar(10));</span><br><span class="line">insert into student values(&apos;01&apos; , &apos;赵雷&apos; , &apos;1990-01-01&apos; , &apos;男&apos;);</span><br><span class="line">insert into student values(&apos;02&apos; , &apos;钱电&apos; , &apos;1990-12-21&apos; , &apos;男&apos;);</span><br><span class="line">insert into student values(&apos;03&apos; , &apos;孙风&apos; , &apos;1990-05-20&apos; , &apos;男&apos;);</span><br><span class="line">insert into student values(&apos;04&apos; , &apos;李云&apos; , &apos;1990-08-06&apos; , &apos;男&apos;);</span><br><span class="line">insert into student values(&apos;05&apos; , &apos;周梅&apos; , &apos;1991-12-01&apos; , &apos;女&apos;);</span><br><span class="line">insert into student values(&apos;06&apos; , &apos;吴兰&apos; , &apos;1992-03-01&apos; , &apos;女&apos;);</span><br><span class="line">insert into student values(&apos;07&apos; , &apos;郑竹&apos; , &apos;1989-07-01&apos; , &apos;女&apos;);</span><br><span class="line">insert into student values(&apos;08&apos; , &apos;王菊&apos; , &apos;1990-01-20&apos; , &apos;女&apos;);</span><br><span class="line"></span><br><span class="line">create table course(Cid varchar(10),Cname varchar(10),Tid varchar(10));</span><br><span class="line">insert into course values(&apos;01&apos; , &apos;语文&apos; , &apos;02&apos;);</span><br><span class="line">insert into course values(&apos;02&apos; , &apos;数学&apos; , &apos;01&apos;);</span><br><span class="line">insert into course values(&apos;03&apos; , &apos;英语&apos; , &apos;03&apos;);</span><br><span class="line"></span><br><span class="line">create table teacher(Tid varchar(10),Tname varchar(10));</span><br><span class="line">insert into teacher values(&apos;01&apos; , &apos;张三&apos;);</span><br><span class="line">insert into teacher values(&apos;02&apos; , &apos;李四&apos;);</span><br><span class="line">insert into teacher values(&apos;03&apos; , &apos;王五&apos;);</span><br><span class="line"></span><br><span class="line">create table sc(Sid varchar(10),Cid varchar(10),score decimal(18,1));</span><br><span class="line">insert into sc values(&apos;01&apos; , &apos;01&apos; , 80);</span><br><span class="line">insert into sc values(&apos;01&apos; , &apos;02&apos; , 90);</span><br><span class="line">insert into sc values(&apos;01&apos; , &apos;03&apos; , 99);</span><br><span class="line">insert into sc values(&apos;02&apos; , &apos;01&apos; , 70);</span><br><span class="line">insert into sc values(&apos;02&apos; , &apos;02&apos; , 60);</span><br><span class="line">insert into sc values(&apos;02&apos; , &apos;03&apos; , 80);</span><br><span class="line">insert into sc values(&apos;03&apos; , &apos;01&apos; , 80);</span><br><span class="line">insert into sc values(&apos;03&apos; , &apos;02&apos; , 80);</span><br><span class="line">insert into sc values(&apos;03&apos; , &apos;03&apos; , 80);</span><br><span class="line">insert into sc values(&apos;04&apos; , &apos;01&apos; , 50);</span><br><span class="line">insert into sc values(&apos;04&apos; , &apos;02&apos; , 30);</span><br><span class="line">insert into sc values(&apos;04&apos; , &apos;03&apos; , 20);</span><br><span class="line">insert into sc values(&apos;05&apos; , &apos;01&apos; , 76);</span><br><span class="line">insert into sc values(&apos;05&apos; , &apos;02&apos; , 87);</span><br><span class="line">insert into sc values(&apos;06&apos; , &apos;01&apos; , 31);</span><br><span class="line">insert into sc values(&apos;06&apos; , &apos;03&apos; , 34);</span><br><span class="line">insert into sc values(&apos;07&apos; , &apos;02&apos; , 89);</span><br><span class="line">insert into sc values(&apos;07&apos; , &apos;03&apos; , 98);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>题目</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">-- 查询&quot; 01 “课程比” 02 &quot;课程成绩高的学生的信息及课程分数</span><br><span class="line"></span><br><span class="line">SELECT  -- 获取所有信息</span><br><span class="line">	st.*,</span><br><span class="line">	temp.score1,</span><br><span class="line">	temp.score2 </span><br><span class="line">FROM</span><br><span class="line">	(</span><br><span class="line">SELECT -- 过滤分数</span><br><span class="line">	sc1.score score1,</span><br><span class="line">	sc2.score score2,</span><br><span class="line">	sc1.Sid </span><br><span class="line">FROM</span><br><span class="line">	( SELECT * FROM sc WHERE sc.Cid = &apos;01&apos; ) sc1</span><br><span class="line">	JOIN ( SELECT * FROM sc WHERE sc.Cid = &apos;02&apos; ) sc2 ON sc1.Sid = sc2.Sid </span><br><span class="line">	HAVING</span><br><span class="line">		( sc1.score &gt; sc2.score )</span><br><span class="line">	) temp</span><br><span class="line">	LEFT JOIN student st ON temp.Sid = st.Sid;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">-- 修改学号为&quot;01&quot;的语文成绩为100</span><br><span class="line">UPDATE sc</span><br><span class="line">INNER JOIN ( SELECT * FROM course WHERE course.cname = &apos;语文&apos; ) cs </span><br><span class="line">SET sc.score = 100 </span><br><span class="line">WHERE</span><br><span class="line">	sc.Sid = &apos;01&apos; </span><br><span class="line">	AND sc.Cid = cs.Cid;</span><br><span class="line"></span><br><span class="line">-- 查询同时存在&quot; 01 “课程和” 02 &quot;课程的情况</span><br><span class="line">SELECT</span><br><span class="line">	Sid </span><br><span class="line">FROM</span><br><span class="line">	sc </span><br><span class="line">WHERE</span><br><span class="line">	Cid IN ( &apos;01&apos;, &apos;02&apos; ) </span><br><span class="line">GROUP BY</span><br><span class="line">	( Sid ) </span><br><span class="line">HAVING</span><br><span class="line">	count( Cid ) = 2;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">-- 查询平均成绩大于70分的学生学号和姓名</span><br><span class="line">SELECT</span><br><span class="line">	st.Sid,</span><br><span class="line">	st.Sname </span><br><span class="line">FROM</span><br><span class="line">	student st</span><br><span class="line">	INNER JOIN ( SELECT Sid, avg( score ) FROM sc GROUP BY Sid HAVING avg( score ) &gt; 70 ) temp ON st.Sid = temp.Sid;</span><br><span class="line">	</span><br><span class="line">-- 查询平均成绩大于等于 85 的所有学生的学号、姓名和平均成绩</span><br><span class="line">SELECT</span><br><span class="line">	st.Sid,</span><br><span class="line">	st.Sname,</span><br><span class="line">	temp.score </span><br><span class="line">FROM</span><br><span class="line">	student st</span><br><span class="line">	INNER JOIN ( SELECT Sid, avg( score ) score FROM sc GROUP BY Sid HAVING avg( score ) &gt;= 85 ) temp ON st.Sid = temp.Sid;</span><br><span class="line"></span><br><span class="line">-- 查询任何一门课程成绩在 70 分以上的姓名、课程名称和分数</span><br><span class="line">SELECT</span><br><span class="line">st.Sname, temp.Cname, temp.score</span><br><span class="line">FROM</span><br><span class="line">	student st</span><br><span class="line">	INNER JOIN ( SELECT sc.Sid, cs.Cname, sc.score FROM sc inner join course cs on sc.Cid=cs.Cid where score&gt;70 ) temp ON st.Sid = temp.Sid;</span><br><span class="line">	</span><br><span class="line">-- 查询 1990 年出生的学生名单</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">st.Sname, st.Sage</span><br><span class="line">FROM</span><br><span class="line">	student st where DATE_FORMAT(st.Sage, &apos;%Y&apos;) = &apos;1990&apos;</span><br><span class="line">	</span><br><span class="line">-- 求每门课程的学生人数</span><br><span class="line">SELECT</span><br><span class="line">	cs.cname,</span><br><span class="line">	temp.sum </span><br><span class="line">FROM</span><br><span class="line">	( SELECT cid, count( sid ) sum FROM sc GROUP BY cid ) temp</span><br><span class="line">	LEFT JOIN course cs ON temp.cid = cs.cid;</span><br><span class="line"></span><br><span class="line">-- 查询男生、女生人数</span><br><span class="line">SELECT</span><br><span class="line">	st.Ssex,</span><br><span class="line">	count( st.Sname ) sum </span><br><span class="line">FROM</span><br><span class="line">	student st </span><br><span class="line">GROUP BY</span><br><span class="line">	st.Ssex</span><br><span class="line">	</span><br><span class="line">-- 查询名字中含有「风」字的学生信息</span><br><span class="line">SELECT</span><br><span class="line">	st.* </span><br><span class="line">FROM</span><br><span class="line">	student st where st.Sname like &apos;%风%&apos;;</span><br></pre></td></tr></table></figure>

<h3 id="二、从不订购的客户"><a href="#二、从不订购的客户" class="headerlink" title="二、从不订购的客户"></a>二、<a href="https://leetcode-cn.com/problems/customers-who-never-order/" target="_blank" rel="noopener">从不订购的客户</a></h3><p><strong><em>题目</em></strong></p>
<blockquote>
<p>某网站包含两个表，Customers 表和 Orders 表。编写一个 SQL 查询，找出所有从不订购任何东西的客户。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Customers 表：</span><br><span class="line"></span><br><span class="line">+----+-------+</span><br><span class="line">| Id | Name  |</span><br><span class="line">+----+-------+</span><br><span class="line">| 1  | Joe   |</span><br><span class="line">| 2  | Henry |</span><br><span class="line">| 3  | Sam   |</span><br><span class="line">| 4  | Max   |</span><br><span class="line">+----+-------+</span><br><span class="line">Orders 表：</span><br><span class="line"></span><br><span class="line">+----+------------+</span><br><span class="line">| Id | CustomerId |</span><br><span class="line">+----+------------+</span><br><span class="line">| 1  | 3          |</span><br><span class="line">| 2  | 1          |</span><br><span class="line">+----+------------+</span><br><span class="line">例如给定上述表格，你的查询应返回：</span><br><span class="line"></span><br><span class="line">+-----------+</span><br><span class="line">| Customers |</span><br><span class="line">+-----------+</span><br><span class="line">| Henry     |</span><br><span class="line">| Max       |</span><br><span class="line">+-----------+</span><br></pre></td></tr></table></figure>

<p><strong><em>题解</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 击败了66.68%（内查询）</span><br><span class="line">SELECT</span><br><span class="line">	cs.NAME AS &apos;Customers&apos; </span><br><span class="line">FROM</span><br><span class="line">	Customers cs </span><br><span class="line">WHERE</span><br><span class="line">	Id NOT IN ( SELECT CustomerId FROM Orders );</span><br><span class="line">	</span><br><span class="line">-- 击败了80.48%（左连接）</span><br><span class="line">SELECT</span><br><span class="line">	cs.NAME AS &apos;Customers&apos; </span><br><span class="line">FROM</span><br><span class="line">	Customers cs</span><br><span class="line">	LEFT JOIN Orders od ON cs.Id = od.CustomerId </span><br><span class="line">WHERE</span><br><span class="line">	od.id IS NULL</span><br></pre></td></tr></table></figure>

<h3 id="三、多表查询的N种情况"><a href="#三、多表查询的N种情况" class="headerlink" title="三、多表查询的N种情况"></a>三、多表查询的N种情况</h3><p>这种查询方式主要用于过滤数据，检测数据是否在表中。以 leetcode <a href="https://leetcode-cn.com/problems/customers-who-never-order/" target="_blank" rel="noopener">从不订购的客户</a>为例，来阐述几种情况</p>
<p>表数据如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Customers 表：</span><br><span class="line"></span><br><span class="line">+----+-------+</span><br><span class="line">| Id | Name  |</span><br><span class="line">+----+-------+</span><br><span class="line">| 1  | Joe   |</span><br><span class="line">| 2  | Henry |</span><br><span class="line">| 3  | Sam   |</span><br><span class="line">| 4  | Max   |</span><br><span class="line">+----+-------+</span><br><span class="line">Orders 表：</span><br><span class="line"></span><br><span class="line">+----+------------+</span><br><span class="line">| Id | CustomerId |</span><br><span class="line">+----+------------+</span><br><span class="line">| 1  | 3          |</span><br><span class="line">| 2  | 1          |</span><br><span class="line">+----+------------+</span><br></pre></td></tr></table></figure>

<p><strong><em>图解如下</em></strong></p>
<p><img src="/image/leetcode/join.png" alt="多表联结"></p>
<ol>
<li>找出所有客户订购东西的情况（左连接）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	cs.NAME AS &apos;Customers&apos;, od.*</span><br><span class="line">FROM</span><br><span class="line">	Customers cs</span><br><span class="line">	LEFT JOIN Orders od ON cs.Id = od.CustomerId</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>找出所有从不订购任何东西的客户（左连接，过滤重叠部分）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 从所有客户购物情况中过滤掉有购物记录的</span><br><span class="line">SELECT</span><br><span class="line">	cs.NAME AS &apos;Customers&apos; </span><br><span class="line">FROM</span><br><span class="line">	Customers cs</span><br><span class="line">	LEFT JOIN Orders od ON cs.Id = od.CustomerId </span><br><span class="line">WHERE</span><br><span class="line">	od.id IS NULL</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>找出有订购东西的所有客户（内连接）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	cs.NAME AS &apos;Customers&apos;</span><br><span class="line">FROM</span><br><span class="line">	Customers cs</span><br><span class="line">	INNER JOIN Orders od ON cs.Id = od.CustomerId</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>找出所有用户订单的客户情况（右连接）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	od.ID AS &apos;Customers&apos; </span><br><span class="line">FROM</span><br><span class="line">	Customers cs</span><br><span class="line">	RIGHT JOIN Orders od ON cs.Id = od.CustomerId</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>找出购物了但没在客户表中的用户（右连接，过滤重叠部分）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	od.ID AS &apos;Customers&apos; </span><br><span class="line">FROM</span><br><span class="line">	Customers cs</span><br><span class="line">	RIGHT JOIN Orders od ON cs.Id = od.CustomerId </span><br><span class="line">WHERE</span><br><span class="line">	cs.id IS NULL</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>全连接</li>
</ol>
<p>Oracle数据库支持full join，mysql是不支持full join的，但仍然可以同过左外连接+ union+右外连接实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Customers</span><br><span class="line">LEFT JOIN Orders ON Customers.id = Orders.id</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM Customers</span><br><span class="line">RIGHT JOIN Orders ON Customers.id = Orders.id</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>全连接，去除重叠部分</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM Customers</span><br><span class="line">LEFT JOIN Orders ON Customers.id = Orders.id</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM Customers</span><br><span class="line">RIGHT JOIN Orders ON Customers.id = Orders.id</span><br><span class="line"></span><br><span class="line">WHERE</span><br><span class="line">	cs.id IS NULL OR od.id IS NULL</span><br></pre></td></tr></table></figure>

<ol start="7">
<li><code>union all</code>和<code>union</code>的区别</li>
</ol>
<p>显示结果不同 union会自动压缩多个结果集合中的重复结果,而union all则将所有的结果全部显示出来。<br>对重复结果的处理不同 union all是直接连接,取到得是所有值,记录可能有重复;union 是取唯一值,记录没有重复</p>
<ol start="8">
<li><code>left join</code> 和 <code>inner join</code> 的区别</li>
</ol>
<p>left join 会返回左表所有的数据，即使右表不存在对应数据<br>inner join 只会返回两个表的交集部分，所以需要有where</p>
</div><div class="post-copyright"><blockquote><p>原文作者: 古城烟雨</p><p>原文链接: <a href="http://zws6672.top/2020/09/18/mysql-test/">http://zws6672.top/2020/09/18/mysql-test/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"><a href="/tags/mysql/">mysql</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2020/09/18/leetcode-20200914-20200917/" class="pre">leetcode-20200914-20200917</a><a href="/2020/09/14/leetcode-20200824-20200907/" class="next">leetcode-20200824-20200907</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、几道SQL查询题"><span class="toc-text">一、几道SQL查询题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、从不订购的客户"><span class="toc-text">二、从不订购的客户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、多表查询的N种情况"><span class="toc-text">三、多表查询的N种情况</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/06/20/swagger2-1/">swagger2 通过OpenAPI文件生成JAVA代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/16/rustInstall/">rust安装与初试</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/15/interface-specification/">接口对接规范</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/15/swagger2/">swagger2的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/15/OpenAPI3-0/">OpenAPI 3.0</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/11/springboot-hot/">springboot实现热部署</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/07/jdk-source-Object/">jdk8 源码 —— Object</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/03/SHA-256/">SHA-256</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/03/jdk-thread-lock/">线程安全与锁优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/27/fmi-cos/">FMI2.0 ———— 联合仿真</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/devops/" style="font-size: 15px;">devops</a> <a href="/tags/CI/" style="font-size: 15px;">CI</a> <a href="/tags/tool/" style="font-size: 15px;">tool</a> <a href="/tags/neo4j/" style="font-size: 15px;">neo4j</a> <a href="/tags/微信小程序/" style="font-size: 15px;">微信小程序</a> <a href="/tags/oracle/" style="font-size: 15px;">oracle</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/系统/" style="font-size: 15px;">系统</a> <a href="/tags/博客搭建/" style="font-size: 15px;">博客搭建</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/co-simulation/" style="font-size: 15px;">co-simulation</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/ms/" style="font-size: 15px;">ms</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/分布式/" style="font-size: 15px;">分布式</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/运维/" style="font-size: 15px;">运维</a> <a href="/tags/并发/" style="font-size: 15px;">并发</a> <a href="/tags/javaweb/" style="font-size: 15px;">javaweb</a> <a href="/tags/mq/" style="font-size: 15px;">mq</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Netty/" style="font-size: 15px;">Netty</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/springboot/" style="font-size: 15px;">springboot</a> <a href="/tags/微服务/" style="font-size: 15px;">微服务</a> <a href="/tags/soft-skills/" style="font-size: 15px;">soft-skills</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/elasticsearch/" style="font-size: 15px;">elasticsearch</a> <a href="/tags/Collection/" style="font-size: 15px;">Collection</a> <a href="/tags/jdk/" style="font-size: 15px;">jdk</a> <a href="/tags/jdk-source/" style="font-size: 15px;">jdk-source</a> <a href="/tags/jna/" style="font-size: 15px;">jna</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/nk/" style="font-size: 15px;">nk</a> <a href="/tags/rust/" style="font-size: 15px;">rust</a> <a href="/tags/源码/" style="font-size: 15px;">源码</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://juejin.im/" title="掘金" target="_blank">掘金</a><ul></ul><a href="https://www.cnblogs.com/" title="博客园" target="_blank">博客园</a><ul></ul><a href="https://www.infoq.cn/" title="info" target="_blank">info</a><ul></ul><a href="https://www.ibm.com/" title="ibm" target="_blank">ibm</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">古城烟雨.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>