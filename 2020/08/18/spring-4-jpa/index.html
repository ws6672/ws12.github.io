<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><title>springboot（四）jpa | 微言术语</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">springboot（四）jpa</h1><a id="logo" href="/.">微言术语</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">springboot（四）jpa</h1><div class="post-meta"><a href="/2020/08/18/spring-4-jpa/#comments" class="comment-count"></a><p><span class="date">Aug 18, 2020</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h3><blockquote>
<p>JPA是Java Persistence API的简称，中文名Java持久层API，是JDK 5.0注解或XML描述对象－关系表的映射关系，并将运行期的实体对象持久化到数据库中。 </p>
</blockquote>
<p><strong><em>jpa和mybatis的区别</em></strong></p>
<ul>
<li>JPA是一种标准，而MyBatis只是一种ORM框架</li>
<li>jpa是对象与对象之间的映射，而mybatis是对象和结果集的映射。</li>
<li>jpa移植性比较好，不用关心用什么数据库，因为mybatis自由写sql语句，所以当项目移植的时候还需要改sql</li>
</ul>
<p><strong><em>生命周期</em></strong></p>
<p>[/image/springboot/jpa-life.png]</p>
<p>实体生命周期有四种状态:<br>New：瞬时对象，尚未有id，还未和Persistence Context建立关联的对象。<br>Managed：持久化受管对象，有id值，已经和Persistence Context建立了关联的对象。<br>Datached：游离态离线对象，有id值，但没有和Persistence Context建立关联的对象。<br>Removed：删除的对象，有id值，尚且和Persistence Context有关联，但是已经准备好从数据库中删除</p>
<p>Managed状态下的数据保存，更新以及删除数据下的Removed状态，数据都不会立即更新到数据库，只有当你事务提交或者em.flush()，才会立即更新到数据库。<br>Datached的状态，可以调用em.merge()方法，这个方法会根据实体类的id来更新数据库数据</p>
<ul>
<li>Managed 作为Java对象存在于实体管理器中；也存在于数据库中</li>
<li>Removed 作为Java对象存在于实体管理器中；</li>
<li>New 只作为java对象存在；</li>
<li>Detached 不存在；</li>
</ul>
<h3 id="2-配置JPA"><a href="#2-配置JPA" class="headerlink" title="2. 配置JPA"></a>2. 配置JPA</h3><p><strong><em>maven 依赖</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">	&lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p><strong><em>YML配置</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql://localhost:3306/toolweb?serverTimezone=UTC&amp;useSSL=false</span><br><span class="line">    username: root</span><br><span class="line">    password: root</span><br><span class="line">  jpa:</span><br><span class="line">    database: mysql</span><br><span class="line">    database-platform: org.hibernate.dialect.MySQL5InnoDBDialect</span><br><span class="line">    show-sql: true</span><br><span class="line">    hibernate:</span><br><span class="line">      ddl-auto: create</span><br></pre></td></tr></table></figure>

<ol>
<li><p><code>spring.datasource.*</code>的配置是通用的JDBC配置。</p>
</li>
<li><p><code>jpa</code>配置的含义如下：</p>
</li>
</ol>
<p><code>spring.jpa.database-platform</code>：配置数据库引擎<br><code>spring.jpa.show-sql</code>：命令行输出sql语句(true|false)<br><code>spring.jpa.hibernate.ddl-auto</code>：<br>    +    create [删除-创建-操作]<br>        +    每次加载 hibernate 时都会删除上一次的生成的表，然后根据你的 model 类再重新来生成新表<br>    +    create-drop [删除-创建-操作-再删除]<br>        +    每次加载 hibernate 时根据 model 类生成表，但是 sessionFactory 一关闭，表就自动删除。<br>    +    update [没表-创建-操作 | 有表-更新没有的属性列-操作]<br>        +    第一次加载 hibernate 时根据 model 类会自动建立起表的结构（前提是先建立好数据库），以后加载 hibernate 时根据 model 类自动更新表结构<br>        +    表结构不会再应用部署后构建，而是在被调用后才构建<br>    +    validate[验证，验证失败，启动失败]<br>        +    不会创建新表，但是会插入新值</p>
<h3 id="3-注解"><a href="#3-注解" class="headerlink" title="3 注解"></a>3 注解</h3><h5 id="3-1-主键相关"><a href="#3-1-主键相关" class="headerlink" title="3.1 主键相关"></a>3.1 主键相关</h5><p><strong><em>@id</em></strong></p>
<p>标注用于声明一个实体类的属性映射为数据库的主键列。该属性通常置于属性声明语句之前，可与声明数据同行，也可卸载单独行上。</p>
<p><code>@Id</code> 标注也可置于属性的getter方法之前。</p>
<p>例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import javax.persistence.Id</span><br><span class="line"></span><br><span class="line">	@Id</span><br><span class="line">	private Integer id;</span><br></pre></td></tr></table></figure>

<p><strong><em>@GeneratedValue</em></strong></p>
<p><code>@GeneratedValue</code>用于定义生成器。</p>
<p><code>@GeneratedValue</code>有两个主要的属性strategy和generator。</p>
<p>strategy用于定义主键生成策略。策略被定义在枚举类<code>GenerationType</code>中, 取值如下</p>
<ol>
<li>GenerationType.TABLE：      使用一个特定的数据库表格来保存主键,持久化引擎通过关系数据库的一张特定的表格来生成主键。 好处就是不依赖于外部环境和数据库的具体实现，完成表与数据库的分离。该策略一般与另外一个注解<code>@TableGenerator</code>一起使用。例如</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@GeneratedValue(strategy = GenerationType.TABLE, generator = &quot;USER_GENERATE&quot;)</span><br><span class="line">@TableGenerator(name = &quot;ID_GENERATE_GENERATE&quot;,</span><br><span class="line">pkColumnValue = &quot;user_seq&quot;,</span><br><span class="line">table = &quot;user_generate&quot;)</span><br><span class="line">@Id</span><br><span class="line">private Long id;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>GenerationType.SEQUENCE：类似Oracle的数据库不支持主键自增长，而是提供了”序列(sequence)”的机制生成主键</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Id</span><br><span class="line">@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;menuSeq&quot;)</span><br><span class="line">@SequenceGenerator(name = &quot;menuSeq&quot;, initialValue = 1, allocationSize = 1, sequenceName = &quot;MENU_SEQUENCE&quot;)</span><br><span class="line">private Integer id;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>GenerationType.IDENTITY<br>主键自增长策略，例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Id</span><br><span class="line">@GeneratedValue(strategy = GenerationType.IDENTITY)</span><br><span class="line">private Integer id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>GenerationType.AUTO</p>
</li>
</ol>
<p>把主键生成策略交给持久化引擎(persistence engine),持久化引擎会根据数据库在以上三种主键生成策略中选择其中一种。此种主键生成策略比较常用,由于JPA默认的生成策略就是GenerationType.AUTO,所以使用此种策略时.可以显式的指定@GeneratedValue(strategy = GenerationType.AUTO)也可以直接@GeneratedValue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">private Integer id;</span><br><span class="line"></span><br><span class="line">@GeneratedValue</span><br><span class="line">private Integer id;</span><br></pre></td></tr></table></figure>

<p><strong><em>主键生成策略</em></strong></p>
<p>JPA 提供了四种主键生成器，如下</p>
<ul>
<li>AUTO：由JPA根据数据库自行决定算法（<code>@GeneratedValue(strategy = GenerationType.AUTO)</code>）</li>
<li>IDENTITY：数据库自增列提供算法（<code>@GeneratedValue(strategy = GenerationType.IDENTITY)</code>）</li>
<li>SEQUENCE：由SEQUENCE对象提供算法（配合注解<code>@SequenceGenerator</code> 使用）</li>
<li>TABLE：由JPA提供者通过创建数据库表来记录生成的主键值（配合注解 <code>@TableGenerator</code> 使用）</li>
</ul>
<h5 id="3-2-TableGenerator-表生成器"><a href="#3-2-TableGenerator-表生成器" class="headerlink" title="3.2 @TableGenerator(表生成器)"></a>3.2 @TableGenerator(表生成器)</h5><p>表生成器是通用性最强的 JPA 主键生成器。这种方法生成主键的策略可以适用于任何数据库，不必担心不同数据库不兼容造成的问题。</p>
<p>常用属性如下</p>
<ul>
<li>name 主键生成策略的名称，被引用在<code>@GeneratedValue</code>中设置的“generator”值中。</li>
<li>table 生成策略所持久化的表名</li>
<li>catalog 属性和 schema 具体指定表所在的目录名或是数据库名</li>
<li>pkColumnName 保存主键名的字段</li>
<li>valueColumnName 保存主键值的字段</li>
<li>pkColumnValue 表里名字字段对应的值</li>
<li>allocationSize 每次增长的大小</li>
<li>initialValue 初始化值</li>
</ul>
<p><strong>*实例 *</strong></p>
<p>实体类定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import javax.persistence.*;</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">public class Book &#123;</span><br><span class="line"></span><br><span class="line">    @GeneratedValue(strategy = GenerationType.TABLE, generator = &quot;ID_GENERATE&quot;)</span><br><span class="line">	// 这个定义在数据库中生成了id_generate的表，用于存放主键</span><br><span class="line">	// 表 id_generate 中有两个列：generate_name、generate_value，它们的值分别是book_seq、1（即表主键标志以及主键增长后的值）</span><br><span class="line">	// 每次插入一条数据，表 id_generate 中，generate_name=book_seq的数据的 generate_value列会自增长</span><br><span class="line">    @TableGenerator(name = &quot;ID_GENERATE&quot;,</span><br><span class="line">            table = &quot;id_generate&quot;,</span><br><span class="line">            initialValue = 1,</span><br><span class="line">            allocationSize = 1,</span><br><span class="line">            pkColumnName = &quot;generate_name&quot;,</span><br><span class="line">            valueColumnName = &quot;generate_value&quot;,</span><br><span class="line">            pkColumnValue = &quot;book_seq&quot;)</span><br><span class="line">    @Id</span><br><span class="line">    private Long id;</span><br><span class="line"></span><br><span class="line">    @Column(name = &quot;book_name&quot;)</span><br><span class="line">    private String book_name;</span><br><span class="line"></span><br><span class="line">    public Long getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setId(Long id) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getBook_name() &#123;</span><br><span class="line">        return book_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBook_name(String book_name) &#123;</span><br><span class="line">        this.book_name = book_name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JPA Repository定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Repository</span><br><span class="line">public interface BookRepository extends JpaRepository&lt;Book, Integer&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>应用启动器需要添加扫描包的注解</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication(scanBasePackages = &quot;com.springboot.example&quot;)</span><br><span class="line">@EntityScan</span><br><span class="line">public class ExampleApplication &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(ExampleApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>添加数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> @Autowired</span><br><span class="line">private BookRepository bookRepository;</span><br><span class="line"></span><br><span class="line">public void addBook() &#123;</span><br><span class="line">	Book book = new Book();</span><br><span class="line">	book.setBook_name(&quot;哈利波特&quot;);</span><br><span class="line">	bookRepository.save(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>* No identifier specified for entity*</strong></p>
<p>没有<code>@Id</code>, 查看了一下是导入包不正确，应当导入<code>javax.persistence.Id</code></p>
<h5 id="3-3-类注解"><a href="#3-3-类注解" class="headerlink" title="3.3 类注解"></a>3.3 类注解</h5><p><strong>* @Entity*</strong></p>
<p>标注用于实体类声明语句之前，指出该Java类为实体类，将映射到指定的数据库表。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">public class User &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>* @Table*</strong></p>
<p>当实体类与其映射的数据库表名<code>不同名</code>时，需要使用<code>@Table</code>标注说明，该注解与<code>@Entity</code>标注并列使用，置于实体类声明语句之前，可写于单独语句行，也可与声明数据同行。</p>
<p><code>@Table</code>标注的常用选项是name，用于指明数据库的表名。</p>
<p><code>@Table</code>标注还有两个可选项catalog和schema用于设置表所属的数据库目录或模式，通常为数据库名。</p>
<p><strong>* @MappedSuperClass*</strong></p>
<ol>
<li><p><code>@MappedSuperclass</code>注解使用在父类上面，是用来标识父类的作用</p>
</li>
<li><p><code>@MappedSuperclass</code>标识的类表示其不能映射到数据库表，因为其不是一个完整的实体类，但是它所拥有的属性能够映射在     其子类对用的数据库表中</p>
</li>
<li><p><code>@MappedSuperclass</code>标识得类不能再有<code>@Entity</code>或<code>@Table</code>注解  但是可以使用<code>@Id</code> 和<code>@Column</code>注解</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* 泛化:继承关系</span><br><span class="line">* 告诉JPA这是所有类都继承的父类</span><br><span class="line">* */</span><br><span class="line">@MappedSuperclass</span><br><span class="line">public class BaseDomain &#123;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue</span><br><span class="line">    protected Long id;</span><br><span class="line"></span><br><span class="line">    public Long getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setId(Long id) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">@Table(name = &quot;department&quot;)</span><br><span class="line">public class Department extends BaseDomain &#123;</span><br><span class="line">	private String name;</span><br><span class="line">    public String getName() &#123;</span><br><span class="line">		return name;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public void setName(String name) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>* @NoRepositoryBean*</strong></p>
<p>在做项目时创建对象的功能会交给Spring去管理在扫描Reposytory层包时会扫描到BaseReposytory接口 ;所有对象类接口都会继承此接口 为了告诉JPA不要创建对应接口的bean对象 就在类上加注解<code>@NoRepositoryBean</code></p>
<p>这样spring容器中就不会有BaseReposytory接口的bean对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@NoRepositoryBean //告诉JPA不要创建对应接口的bean对象</span><br><span class="line">public interface BaseReposittory &lt;T,ID extends Serializable&gt; extends 	JpaRepository&lt;T,ID&gt;,JpaSpecificationExecutor&lt;T&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><em>@Repository</em></strong></p>
<p>和<code>@Controller</code>、<code>@Service</code>、<code>@Component</code>的作用差不多，都是把对象交给spring管理。<code>@Repository</code>用在持久层的接口上，这个注解是将接口的一个实现类交给spring管理。</p>
<h5 id="3-3-列相关注解"><a href="#3-3-列相关注解" class="headerlink" title="3.3 列相关注解"></a>3.3 列相关注解</h5><p><strong>* @Column*</strong></p>
<p>当实体的属性与其映射的数据库表的列不同名时需要使用<code>@Column</code>标注说明，该属性通常置于实体的属性声明语句之前，还可与<code>@Id</code>标注一起使用。</p>
<p><code>@Column</code>标注的常量属性是name，用于设置映射数据库表的列名。此外，该注解还包含其他多个属性，比如：unique，nullable，length等。</p>
<p><code>@Column</code>标注的columnDefinition属性：表示该字段在数据中的实际类型</p>
<p><strong>* @Transient 和 @Basic*</strong></p>
<p>表示该属性并非一个到数据库表的字段的映射，ORM框架将忽略该属性。</p>
<p>如果一个属性并非数据库的字段映射，就务必将其标示为<code>@Transient</code>，否则，ORM框架默认其注解为<code>@Basic</code>。</p>
<p><strong>* @JsonIgnore*</strong></p>
<p>作用是在json序列化时将java bean中的一些属性忽略掉，序列化和反序列化都受影响。一般标记在属性或者方法上，返回的json数据即不包含该属性。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class HistoryOrderBean &#123;</span><br><span class="line"></span><br><span class="line">    //基本属性字段</span><br><span class="line">    private String insurantName;</span><br><span class="line">    private String insuranceName;</span><br><span class="line">    private String insurancePrice;</span><br><span class="line">    private String insurancePicture;</span><br><span class="line">    private String insuranceLimit;</span><br><span class="line"></span><br><span class="line">    //快照属性字段</span><br><span class="line">    @JsonIgnore</span><br><span class="line">    private String goodsInfo;      //快照基本信息</span><br><span class="line">    @JsonIgnore  </span><br><span class="line">    private String extendsInfo;    //快照扩展属性信息</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注解失败：<br>使用的是fastJson，尝试使用对应的注解来忽略字段，注解为<code>@JSONField(serialize = false)</code>。</p>
<h5 id="3-4-关联注解"><a href="#3-4-关联注解" class="headerlink" title="3.4 关联注解"></a>3.4 关联注解</h5><p><strong><em>单向关联与双向关联</em></strong></p>
<p>单向关联：两者之间的关系是从属关系，一部分依附另外一部分。<br>双向关联：两者之间的关系是平等的，都是独立个体。</p>
<ol>
<li>以一对一的关系举例</li>
</ol>
<ul>
<li>业务场景一（单向关联）：假设一个人只拥有一只宠物，我们可以通过人去访问宠物，但是很难通过走失的动物找到人。在这个业务中，实体间的关系是一对一，且是单向的。</li>
<li>业务场景二（双向关联）：我国法律实行一夫一妻制。所以，一个丈夫只能有一个妻子，一个妻子也只有一个丈夫。这里就存在双向的一对一关系</li>
</ul>
<ol start="2">
<li>以一对多的关系举例</li>
</ol>
<ul>
<li>业务场景一（单向关联）：假设一个人可以拥有多只宠物，我们可以通过人找到所有宠物，但是很难通过走失的动物找到人。在这个业务中，实体间的关系是一对多，且是单向的。</li>
<li>业务场景二（双向关联）：一个老师有多个学生。我们可以通过老师去找到学生，也可以通过学生找到老师。所以，这里的联系是双向的。</li>
</ul>
<p>具体是单向还是双向的，要具体业务具体分析，从业务出发。</p>
<p><strong><em>相关的注解</em></strong></p>
<ul>
<li><code>@OneToOne</code>(一对一关系)：一人属于一个班级</li>
<li><code>@OneToMany</code>(一对多关系)：每个出版社出版很多书，但是每本书名只能出自一个出版社。</li>
<li><code>@ManyToOne</code>（多对一关系）：一根头发属于一个人，这个人有多根头发</li>
<li><code>@ManyToMany</code>(多对多关系)：一个学生有多门课程，一个门课程有多个学生参加</li>
<li><code>@JoinColumn</code> 表示外键</li>
</ul>
<p><strong>* @OneToOne*</strong></p>
<p><code>@OneToOne</code>与<code>@JoinColumn</code>结合使用，表示会在源实体（Source Entity，即声明该注解的实体类中创建外键，进行级联）</p>
<p><code>@JoinColumn（设置外键）</code>注释的是保存表与表之间关系的字段，它要标注在实体属性上(相当于外键)。与<code>@Column</code>标记一样，是用于注释表中的字段的。它的属性与<code>@Column</code>属性有很多相同之处</p>
<p>注解源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.METHOD, ElementType.FIELD&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">public @interface OneToOne &#123;</span><br><span class="line">    Class targetEntity() default void.class;</span><br><span class="line">    CascadeType[] cascade() default &#123;&#125;;</span><br><span class="line">    FetchType fetch() default FetchType.EAGER;</span><br><span class="line">    boolean optional() default true;</span><br><span class="line">    String mappedBy() default &quot;&quot;;</span><br><span class="line">    boolean orphanRemoval() default false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相关属性说明</p>
<ol>
<li><p>targetEntity(关联的实体)</p>
</li>
<li><p>cascade（级联操作权限）</p>
</li>
</ol>
<ul>
<li>CascadeType.PERSIST：级联持久化，A对象新增了，会跟着新增B对象。B对象存在则抛异常</li>
<li>CascadeType.MERGE：级联合并，指A类新增或者变化，会级联B对象</li>
<li>CascadeType.REMOVE：级联删除，A类删除了会跟着删除B类</li>
<li>CascadeType.DETACH：级联游离，支持单独删除带B对象外键的A对象</li>
<li>CascadeType.REFRESH：级联刷新，假设场景 有一个订单,订单里面关联了许多商品,这个订单可以被很多人操作,那么这个时候A对此订单和关联的商品进行了修改,与此同时,B也进行了相同的操作,但是B先一步比A保存了数据,那么当A保存数据的时候,就需要先刷新订单信息及关联的商品信息后,再将订单及商品保存</li>
<li>CascadeType.ALL：拥有以上所有级联操作权限。</li>
</ul>
<ol start="3">
<li>fetch（设置关联对象的加载方式）</li>
</ol>
<ul>
<li>FetchType.EAGER：立即加载，比如在加载学生对象信息时，立刻加载学生的成绩信息</li>
<li>FetchType.LAZy：延迟加载，需要用到的时候再加载</li>
</ul>
<ol start="4">
<li><p>optional（表示该属性是否允许为null,默认为true）</p>
</li>
<li><p>mappedBy（关系维护，避免生成中间表）：用来标注拥有这种关系的字段。 除非关系是单向的，否则是必需的。</p>
</li>
</ol>
<ul>
<li>mappedBy 只有在双向关联时,才会使用这个属性</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = &quot;parent&quot;)</span><br><span class="line">   private List&lt;ListEntity&gt; list = new ArrayList&lt;ListEntity&gt;();</span><br><span class="line">// mappedBy= &quot;parent&quot; 表示在ListEntity类中的 parent 属性来维护关系，这个名称必须和ListEntity中的parent属性名称完全一致才行(OneToMany必须写mappedBy，不然会多生成一张没用的中间表)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="6">
<li>orphanRemoval</li>
</ol>
<ul>
<li>jpa 中 orphanRemoval 属性，如果为 true 的话，想要删掉子集合数据，那么调用子集合list 的 clear 方法清空，并且断关系可以直接在数据库中删除子集合数据， 不能直接设置 为null，否则抛出异常</li>
<li>如果没有该属性，调用子集合list 的 clear 方法清空，并且断关系则在数据库中把 子表数据中保存的主表id 设置为空,断开关系</li>
<li>而cascade 是总开关，如果 这里没有设置 CascadeType.all  或者 delete ，那么就算 orphanRemoveal 设置为 true 也无法执行删除</li>
</ul>
<ol start="7">
<li>cascade 和 orphanremoval 的关系说明</li>
</ol>
<ul>
<li>首先二者的作用范围不一样，cascade的作用范围是数据库，当cascade属性设置了delete时，当删除级联关系中的子集时，顺便也会将数据库中对应的数据删除。</li>
<li>orphanremoval属性的作用范围仅仅是java应用代码中，做级联删除的操作也只适用于java实体代码范畴，它可以清楚javabean的级联关系，但并不能影响数据库的数据，只要cascade不点头是无法删除掉数据库的数据的。</li>
</ul>
<p>实例1——单向</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">public class People &#123;</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    @OneToOne</span><br><span class="line">    @JoinColumn(name = &quot;petId&quot;)</span><br><span class="line">	// 该表会生成一个 pet_id的外键，维持两表的关系</span><br><span class="line">    private Pet pet;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">public class Pet &#123;</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实例2——双向</p>
<p>数据库中Wife这张表找不到关联到Husband的外键，因为我们定义关系的时候，规定了关系的维护端是Husband。所以，对于数据库来说，双方的联系的单向的。当配置mappedBy后使关系成为双向，这一切对于数据库来说是透明的，一切都是JPA在处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">public class Husband &#123;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    @OneToOne</span><br><span class="line">    @JoinColumn(name = &quot;wife_id&quot;)</span><br><span class="line">    private Wife wife;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">public class Wife &#123;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">//    Wife实体是被 Hhusband实体中的外键“wife”所维护。</span><br><span class="line">    @OneToOne(mappedBy = &quot;wife&quot;)</span><br><span class="line">    private Husband husband;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>* @OneToMany、@ManyToOne*</strong></p>
<p><code>@OneToMany</code> 用于维持一对多的联系。</p>
<p>源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.METHOD, ElementType.FIELD&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">public @interface OneToMany &#123;</span><br><span class="line">    Class targetEntity() default void.class;</span><br><span class="line"></span><br><span class="line">    CascadeType[] cascade() default &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    FetchType fetch() default FetchType.LAZY;</span><br><span class="line"></span><br><span class="line">    String mappedBy() default &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    boolean orphanRemoval() default false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实例1——单向</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">public class School &#123;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long Id;</span><br><span class="line">    private String name;</span><br><span class="line">    @OneToMany</span><br><span class="line">    @JoinColumn(name = &quot;schoolId&quot;)</span><br><span class="line">    private Set&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">public class Student &#123;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long Id;</span><br><span class="line">    private String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实例2——双向<br>一对多的双向联系需要同时使用“@OneToMany、@ManyToOne”两个注解。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">public class Grp &#123;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long Id;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">	// 需要配置mappedBy，否则会被识别为多对多的关系</span><br><span class="line">    @OneToMany(mappedBy = &quot;group&quot;)</span><br><span class="line">    Set&lt;User&gt; users;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">public class User &#123;</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long Id;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    @ManyToOne</span><br><span class="line">    @JoinColumn(name=&quot;gid&quot;)</span><br><span class="line">    private Grp group;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong><em>@ManyToMany、@JoinTable</em></strong></p>
<p>源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.METHOD, ElementType.FIELD&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">public @interface ManyToMany &#123;</span><br><span class="line">    Class targetEntity() default void.class;</span><br><span class="line"></span><br><span class="line">    CascadeType[] cascade() default &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    FetchType fetch() default FetchType.LAZY;</span><br><span class="line"></span><br><span class="line">    String mappedBy() default &quot;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>manyToMany需要和 JoinTable 表结合使用，ManyToMany总是使用中间关系连接表来存储关系。如果两个Vo都定义了ManyToMany的话，因为单向关系，会生成有2个中间表。所以需要改造成双向关系，使其只存在一个中间表。</p>
<blockquote>
<p>注：一方不需要mappedBy属性，一方需要。</p>
</blockquote>
<p>实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">@Table</span><br><span class="line">public class Student &#123;</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long Id;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    @ManyToMany</span><br><span class="line">    @JoinTable(name = &quot;stu_course&quot;,</span><br><span class="line">            joinColumns = @JoinColumn(name = &quot;stu_id&quot;),</span><br><span class="line">            inverseJoinColumns = @JoinColumn(name=&quot;course_id&quot;))</span><br><span class="line">	// 创建了stu_course的中间表，有两个字段stu_id、course_id</span><br><span class="line">    private List&lt;Course&gt; courses;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">public class Course &#123;</span><br><span class="line">    @javax.persistence.Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.AUTO)</span><br><span class="line">    private Long Id;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">	//避免创建多个中间表</span><br><span class="line">    @ManyToMany(mappedBy = &quot;courses&quot;)</span><br><span class="line">    List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://my.oschina.net/bigyuan/blog/336515" target="_blank" rel="noopener">JPA mappedBy属性</a><br><a href="https://www.jianshu.com/p/e8caafce5445" target="_blank" rel="noopener">JPA概念解析：CascadeType</a><br><a href="https://blog.csdn.net/yingxiake/article/details/50968059" target="_blank" rel="noopener">https://blog.csdn.net/yingxiake/article/details/50968059</a></p>
</div><div class="post-copyright"><blockquote><p>原文作者: 古城烟雨</p><p>原文链接: <a href="http://aixf.club/2020/08/18/spring-4-jpa/">http://aixf.club/2020/08/18/spring-4-jpa/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2020/08/19/springboot-5-transaction/" class="pre">springboot（五）事务管理</a><a href="/2020/08/17/springboot-3/" class="next">springboot（三）注解</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-概述"><span class="toc-text">1. 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-配置JPA"><span class="toc-text">2. 配置JPA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-注解"><span class="toc-text">3 注解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-主键相关"><span class="toc-text">3.1 主键相关</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-TableGenerator-表生成器"><span class="toc-text">3.2 @TableGenerator(表生成器)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-类注解"><span class="toc-text">3.3 类注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-列相关注解"><span class="toc-text">3.3 列相关注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-关联注解"><span class="toc-text">3.4 关联注解</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/08/21/msjl-1/">面试记录（一）某创——外贸——三轮</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/19/springboot-5-transaction/">springboot（五）事务管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/18/spring-4-jpa/">springboot（四）jpa</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/17/springboot-3/">springboot（三）注解</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/17/springboot-2/">springboot（二）配置与启动</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/16/leetcode-202008-10-16/">leetcode-202008-10-16</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/15/springboot-1/">springboot（一）入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/14/elasticsearch-7/">ES（七）处理人类语言——文本特征抽取</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/12/elasticsearch-6/">ES（五）处理人类语言——词汇识别</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/10/leetcode-202008-03-09/">leetcode 20/08/03——/20/08/09</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/jdk8/" style="font-size: 15px;">jdk8</a> <a href="/tags/CI/" style="font-size: 15px;">CI</a> <a href="/tags/devops/" style="font-size: 15px;">devops</a> <a href="/tags/运维/" style="font-size: 15px;">运维</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/oracle/" style="font-size: 15px;">oracle</a> <a href="/tags/OAuth/" style="font-size: 15px;">OAuth</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/并发/" style="font-size: 15px;">并发</a> <a href="/tags/阿里云/" style="font-size: 15px;">阿里云</a> <a href="/tags/bat/" style="font-size: 15px;">bat</a> <a href="/tags/neo4j/" style="font-size: 15px;">neo4j</a> <a href="/tags/centos/" style="font-size: 15px;">centos</a> <a href="/tags/博客搭建/" style="font-size: 15px;">博客搭建</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/design-pattern/" style="font-size: 15px;">design-pattern</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/分布式/" style="font-size: 15px;">分布式</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/idea/" style="font-size: 15px;">idea</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/gc/" style="font-size: 15px;">gc</a> <a href="/tags/javaio/" style="font-size: 15px;">javaio</a> <a href="/tags/dom4j/" style="font-size: 15px;">dom4j</a> <a href="/tags/Jenkins/" style="font-size: 15px;">Jenkins</a> <a href="/tags/JDK8/" style="font-size: 15px;">JDK8</a> <a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/jmh/" style="font-size: 15px;">jmh</a> <a href="/tags/kettle/" style="font-size: 15px;">kettle</a> <a href="/tags/hibernate/" style="font-size: 15px;">hibernate</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/mq/" style="font-size: 15px;">mq</a> <a href="/tags/ms/" style="font-size: 15px;">ms</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/gdb/" style="font-size: 15px;">gdb</a> <a href="/tags/PLSQL/" style="font-size: 15px;">PLSQL</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/Spring-Cloud/" style="font-size: 15px;">Spring Cloud</a> <a href="/tags/微服务/" style="font-size: 15px;">微服务</a> <a href="/tags/springmvc/" style="font-size: 15px;">springmvc</a> <a href="/tags/springboot/" style="font-size: 15px;">springboot</a> <a href="/tags/系统/" style="font-size: 15px;">系统</a> <a href="/tags/swagger/" style="font-size: 15px;">swagger</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/小程序/" style="font-size: 15px;">小程序</a> <a href="/tags/webservice/" style="font-size: 15px;">webservice</a> <a href="/tags/window-server/" style="font-size: 15px;">window server</a> <a href="/tags/elasticsearch/" style="font-size: 15px;">elasticsearch</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/源码/" style="font-size: 15px;">源码</a> <a href="/tags/微信小程序/" style="font-size: 15px;">微信小程序</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">古城烟雨.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>