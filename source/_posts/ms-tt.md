---
title: 面试记录（六）某拓
date: 2020-11-03 23:10:11
tags: [ms]
---

### 面试题

1. 复合索引（联合索引）

单一索引是指索引列为一列的情况,即新建索引的语句只实施在一列上；用户可以在多个列上建立索引,这种索引叫做复合索引(组合索引)。

复合索引类型

+	窄索引是指索引列为1-2列的索引
+	宽索引也就是索引列超过2列的索引

优点

+	减少开销(每多一个索引，都会增加磁盘空间的开销)
+	可能会覆盖索引，直接通过遍历索引取得数据，无需回表

> 使用事项：设计索引的一个重要原则就是能用窄索引不用宽索引,因为窄索引往往比组合索引更有效；
对于复合索引,在查询使用时,最好将条件顺序按找索引的顺序,这样效率最高；
根据where条件建索引。

不适用索引的场景如下

+	对于插入、删除数据频率高的表，不适用索引
+	对于某列修改频率高的，该列不适用索引


2. 数据库死锁

多数情况下，可以认为如果一个资源被锁定，它总会在以后某个时间被释放。而死锁发生在当多个进程访问同一数据库时，其中每个进程拥有的锁都是其他进程所需的，由此造成每个进程都无法继续下去。简单的说，进程A等待进程B释放他的资源，B又等待A释放他的资源，这样就互相等待就形成死锁。


产生死锁的主要原因

+	系统资源不足
+	进程运行推进的顺序不合适
+	资源分配不当等

降低死锁的方法

+	按序访问对象(按序访问)
+	避免事务中的用户交互
+	保持事务简短并在一个批处理中
+	使用低隔离级别
+	使用绑定连接
	+	次级连接所获得的任何锁可以象由主连接获得的锁那样持有，反之亦然，因此不会相互阻塞

3. mysql什么时候锁表

insert时全表锁，因为要生成主键字段、索引等等，update是行级锁
+	myisam，锁表
+	innodb, 走索引或主键时锁行（共享锁和排它锁），否则锁表

4. 部署项目常用的Linux命令

+	cd
	+	cd是用于切换文件路径的,其中`../`可以切换到上当前路径的上一个路径
+	tomcat服务器命令
	+	启动	`./startup.sh`  或者 `bash startup.sh`
	+	关闭	`./shutdown.sh`  或者 `bash shutdown.sh`
	+	日志	`tail -f catalina.out` （-f 启动日志跟踪 -n 显示最后n行）
	+	状态	`ps ef |  grep java`
+	杀死线程
	+	`kiil -9 5263`
+	查看端口占用情况
	+	`netstat -tunlp |grep` 端口号 
+	cpu使用率
	+	`top`
