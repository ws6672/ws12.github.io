<!DOCTYPE html>
<html>
<head>
  <title>My first Vue app</title>
  <!-- 1. 引入vue.js -->
  <!-- 开发环境版本，包含了有帮助的命令行警告 -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
  <div id="app">
		<p>计数：{{ count }}</p>
		<button @click="add(10)">add</button>
		
		<div>
			<p>科目  分数</p>
			<p v-for="item in results">{{item.name}}  {{item.score}}</p>
			<p>总分：{{this.computedAvg }}</p>
		</div>
		
		<div>
			<p><input type="number" v-model = "yc"/> 英寸==> 厘米</P>
			<p>{{ yc }} 英寸 = {{  this.exchangeYC }} 厘米 </P>
		</div>
		
		<my-component></my-component>
		<child-component><child-component>
  </div>

  <script>
	
	Vue.component('my-component', {
		template: "<span style='color:red;'>通过component定义的全局组件</span>"
	})
	
    //2. 创建Vue实例对象，设置el属性和data属性  
	var app = new Vue({
		el: '#app',
		data: {
			count:1,
			results: [
				{name: 'english', score: 70},
				{name: 'math', score: 80},
				{name: 'chinese', score: 90}
			],
			yc: 0
		},
		methods: {
			add: function(num) {
				if(num!='') {
					this.count+=num
				} else {
					this.count++
				}
			}
		},
		computed: {
			computedAvg: function() {
				let sum=0
				let rst = this.results;
				for (let i=0; i < rst.length; i++) {
					sum+=rst[i].score
				}
				return sum/rst.length
			},
			exchangeYC: function() {
				return this.yc * 2.54
			}
		},
		watch: {
			yc: {
				// yc值修改后触发
				handler(nv, ov) {
					// 后台输出值
					console.log(ov + "==>" + nv);
				},
				immediate: false, //网页加载完后不会立即调用一次
				deep: true //会进行深度监听，如果绑定的是变量，内部属性的变动也会触发
			}
		},
		components: {
			"child-component":{
				template:"<p>根实例中components属性定义的局部组件</p>"
			}
		}
	})
  </script>
</body>
</html>