---
title: 阿里云实战（一）云平台的通讯问题
date: 2020-03-23 17:27:24
tags: [系统]
---

这段时间，有个系统被迁移到云平台，需要和其他系统进行通信，在双方都`开通了策略`、`关闭了防火墙`之后，却无法通过私有ip访问。


### 1.什么是私有ip

购买了阿里云的服务器都会有一个公网IP和一个私有IP地址，私有ip地址可以进行同地域内网互通，一般内网连接速度较快，如果你有多台阿里云同地域的机器，可以用内网ip互相通讯，带宽大很多而且流量免费。

两个私有ip相互访问的要求
+	同一地域
+	同一网段

### 2.什么是同一网段
同一网段指的是网络标识相同，各类IP的网络标识算法都是不一样的。需要根据子网掩码的位数来判断。
有两个私有IP及子网掩码如下：
10.11.13.2/255.255.255.0
10.11.14.1/255.255.255.0

```
10.11.13.2
00001010000010110000110100000010

10.11.14.1
00001010000010110000111000000001

255.255.255.0
11111111111111111111111100000000

`AND`运算结果:
10.11.13.0
10.11.14.0
非同一网段。
```
将IP和掩码转换为二进制后，进行AND操作，最终得到的才是网络标识。

具有相同网络地址的IP在同一网段，在同一网段内的计算机之间可以直接通信，而在不同网段之间的主机通信时是需要网关的。

### 3.网关
网段:用来区分网路上的主机是否在同一网路区段内。
例如：网关为`192.168.123.250`,
说明它处於192.168.123.X的网段(X代表1-255之间的任意值).若您的路由器的IP地址是192.168.1.X或是其他位址,说明二者不处於同一网段,则它们之间无法相互连接,

### 4.结论
我们的两个私有ip目测是不在同一网段的。目前怀疑是这个问题导致的无法通讯。

***待续***

> [网关和网段区别](https://blog.csdn.net/haifengid/article/details/51537914)